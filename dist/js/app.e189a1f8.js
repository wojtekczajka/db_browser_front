(function(){"use strict";var e={2315:function(e,t,s){s(3455);var r=s(9242),o=s(4161),a=s(3396);const n={id:"app"};function i(e,t,s,r,o,i){const l=(0,a.up)("NavBar"),c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(l),(0,a.Wm)(c)])}var l=s(7139);const c={class:"nav-bar"},u={class:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},d={class:"container"},g=(0,a._)("a",{class:"navbar-brand px-2",href:"#"},"DB Browser",-1),h=(0,a._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1),m={class:"collapse navbar-collapse",id:"navbarNavAltMarkup"},p={class:"navbar-nav"};function f(e,t,s,r,o,n){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("nav",u,[(0,a._)("div",d,[g,h,(0,a._)("div",m,[(0,a._)("div",p,[(0,a.Wm)(i,{class:"nav-item nav-link",to:"/",exact:""},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),e.isAuthenticated?((0,a.wg)(),(0,a.j4)(i,{key:0,class:"nav-item nav-link",to:"/browse"},{default:(0,a.w5)((()=>[(0,a.Uk)("Browse")])),_:1})):(0,a.kq)("",!0),e.isProfileLoaded?((0,a.wg)(),(0,a.j4)(i,{key:1,class:"nav-item nav-link",to:"/profile"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.name),1)])),_:1})):(0,a.kq)("",!0),e.isAuthenticated?((0,a.wg)(),(0,a.iD)("a",{key:2,onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e)),class:"nav-item nav-link",href:"#"},"Logout")):(0,a.kq)("",!0)])])])])])}s(7658);var b=s(65);const _="AUTH_REQUEST",w="AUTH_SUCCESS",v="AUTH_ERROR",y="AUTH_LOGOUT";var k={name:"NavBar",methods:{logout:function(){this.$store.dispatch(y).then((()=>this.$router.push("/")))}},computed:{...(0,b.Se)(["getProfile","isAuthenticated","isProfileLoaded"]),...(0,b.rn)({authLoading:e=>"loading"===e.auth.status,name:e=>`${e.user.profile.username}`})}},R=s(89);const D=(0,R.Z)(k,[["render",f]]);var S=D;const L="USER_REQUEST",x="USER_SUCCESS",q="USER_ERROR";var A={components:{NavBar:S},name:"MainView",created:function(){const e=this,t=new Promise((function(t,s){o.Z.interceptors.response.use(void 0,(function(t){401!==t.response.status||t.config.__isRetryRequest||"Token expired"!==t.response.data.detail||(e.$store.dispatch(y),console.log(t.response),alert("Access token expired. You will be automatically logged out.")),s(t)}))}));t.catch((function(){})),this.$store.getters.isAuthenticated&&this.$store.dispatch(L)}};const U=(0,R.Z)(A,[["render",i]]);var E=U,P=s(2483);const C={class:"main"},$={key:0},T={key:1,class:"text-dark"},Z={key:0,class:"row justify-content-center mt-5"},z={class:"col-md-8"},I={class:"text-center text-dark"},j={class:"list-group"},O=(0,a._)("li",{class:"list-group-item list-group-item-action active"},"Table List",-1),F=["onClick"],M={key:1},Q=(0,a._)("p",null,"Loading database information...",-1),V=[Q];function B(e,t,s,r,o,n){const i=(0,a.up)("Navbar"),c=(0,a.up)("AuthView");return(0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(i),n.isAuthenticated?((0,a.wg)(),(0,a.iD)("div",T,[o.databaseInfo?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a._)("div",z,[(0,a._)("h2",I,"Database Name: "+(0,l.zw)(o.databaseInfo.db_name),1),(0,a._)("ul",j,[O,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.databaseInfo.db_tables,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item list-group-item-action",key:e,onClick:t=>n.redirectToBrowse(e)},(0,l.zw)(e),9,F)))),128))])])])):((0,a.wg)(),(0,a.iD)("div",M,V))])):((0,a.wg)(),(0,a.iD)("div",$,[(0,a.Wm)(c)]))])}const N={class:"container-fluid"},H={class:"row justify-content-center align-items-center",style:{height:"100vh"}},Y={class:"text-center text-dark mt-3"},G={key:0},K={key:1};function W(e,t,s,o,n,i){const l=(0,a.up)("LoginForm"),c=(0,a.up)("RegisterForm");return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",H,[(0,a.Wm)(r.uT,{name:"fade",duration:{enter:1e3,leave:1e3},mode:"out-in"},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.iD)("div",{class:"col-md-4 col-sm-8 col-10 border p-4 bg-light",key:n.showRegisterForm},[(0,a.Wm)(r.uT,{name:"fade"},{default:(0,a.w5)((()=>[n.showRegisterForm?((0,a.wg)(),(0,a.j4)(c,{key:1,onRegisterSuccess:i.handleRegisterSuccess},null,8,["onRegisterSuccess"])):((0,a.wg)(),(0,a.j4)(l,{key:0,onLoginSuccess:i.handleLoginSuccess},null,8,["onLoginSuccess"]))])),_:1}),(0,a._)("div",Y,[n.showRegisterForm?((0,a.wg)(),(0,a.iD)("p",K,[(0,a.Uk)(" Already have an account? "),(0,a._)("a",{href:"#",onClick:t[1]||(t[1]=(0,r.iM)(((...e)=>i.toggleRegisterForm&&i.toggleRegisterForm(...e)),["prevent"]))},"Login")])):((0,a.wg)(),(0,a.iD)("p",G,[(0,a.Uk)(" Don't have an account? "),(0,a._)("a",{href:"#",onClick:t[0]||(t[0]=(0,r.iM)(((...e)=>i.toggleRegisterForm&&i.toggleRegisterForm(...e)),["prevent"]))},"Register")]))])]))])),_:1})])])}const J={class:"mb-3"},X=(0,a._)("label",{for:"inputLogin",class:"form-label"},"Login",-1),ee={class:"mb-3"},te=(0,a._)("label",{for:"inputPassword",class:"form-label"},"Password",-1),se=(0,a._)("div",{class:"d-flex justify-content-center"},[(0,a._)("button",{type:"submit",class:"btn btn-primary border w-100"},"Submit")],-1),re={class:"text-center text-dark mt-3"},oe=(0,a._)("p",null,"or log in with:",-1),ae=(0,a._)("input",{type:"submit",class:"btn btn-secondary w-100",value:"Continue with Google"},null,-1),ne=[oe,ae],ie={class:"login-form-content mt-3"},le={key:0,class:"text-danger"},ce={key:1,class:"text-success"};function ue(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",{class:"text-dark",onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>i.handleLogin&&i.handleLogin(...e)),["prevent"]))},[(0,a._)("div",J,[X,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.form.username=e)},null,512),[[r.nr,n.form.username]])]),(0,a._)("div",ee,[te,(0,a.wy)((0,a._)("input",{type:"password",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.password=e)},null,512),[[r.nr,n.form.password]])]),se],32),(0,a._)("div",re,[(0,a._)("form",{onSubmit:t[3]||(t[3]=(0,r.iM)(((...e)=>i.handleGoogleLogin&&i.handleGoogleLogin(...e)),["prevent"]))},ne,32)]),(0,a._)("div",ie,[n.loginError?((0,a.wg)(),(0,a.iD)("p",le,"Error logging in. Please try again.")):(0,a.kq)("",!0),n.activationSuccess?((0,a.wg)(),(0,a.iD)("p",ce,"Account activated successfully. Please log in.")):(0,a.kq)("",!0)])])}var de={name:"LoginView",data(){return{form:{username:"",password:""},loginSuccess:!1,loginError:!1,activationSuccess:!1}},methods:{handleLogin(){const{username:e,password:t}=this.form,s=new FormData;s.append("username",e),s.append("password",t),console.log(s),this.$store.dispatch(_,s).then((()=>{this.loginSuccess=!0,setTimeout((()=>{this.$router.push("/")}),1e3),this.$router.push("/")})).catch((e=>{this.loginError=!0,console.log(e)}))},handleGoogleLogin(){window.location.href=o.Z.defaults.baseURL+"/auth/google_signin/"},checkAccessToken(){const e=this.$route.query.access_token;e&&(this.$store.commit(_),this.$store.commit(w,e),o.Z.defaults.headers.common.Authorization="Bearer "+e,localStorage.setItem("user-token",e),this.$store.dispatch(L).then((()=>{this.loginSuccess=!0,this.$router.push("/")})).catch((e=>{this.loginError=!0,console.log(e)})))},checkActivationSuccess(){const e=this.$route.query.activation_success;e&&(this.activationSuccess=!0)}},mounted(){this.checkAccessToken(),this.checkActivationSuccess()}};const ge=(0,R.Z)(de,[["render",ue]]);var he=ge;const me={class:"mb-3"},pe=(0,a._)("label",{for:"inputEmail",class:"form-label"},"E-mail",-1),fe={class:"mb-3"},be=(0,a._)("label",{for:"inputLogin",class:"form-label"},"Login",-1),_e={class:"mb-3"},we=(0,a._)("label",{for:"inputPassword",class:"form-label"},"Password",-1),ve=(0,a._)("div",{class:"d-flex justify-content-center"},[(0,a._)("button",{type:"submit",class:"btn btn-primary border w-100"},"Submit")],-1),ye={class:"text-center text-dark mt-3"},ke=(0,a._)("p",null,"or log in with:",-1),Re=(0,a._)("input",{type:"submit",class:"btn btn-secondary w-100",value:"Continue with Google"},null,-1),De=[ke,Re],Se={class:"login-form-content mt-3"},Le={key:0,class:"text-danger"},xe={key:1,class:"text-success"};function qe(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",{class:"text-dark",onSubmit:t[3]||(t[3]=(0,r.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,a._)("div",me,[pe,(0,a.wy)((0,a._)("input",{type:"email",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[r.nr,n.email]])]),(0,a._)("div",fe,[be,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.username=e)},null,512),[[r.nr,n.username]])]),(0,a._)("div",_e,[we,(0,a.wy)((0,a._)("input",{type:"password",class:"form-control",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e)},null,512),[[r.nr,n.password]])]),ve],32),(0,a._)("div",ye,[(0,a._)("form",{onSubmit:t[4]||(t[4]=(0,r.iM)(((...e)=>i.handleGoogleLogin&&i.handleGoogleLogin(...e)),["prevent"]))},De,32)]),(0,a._)("div",Se,[n.registerError?((0,a.wg)(),(0,a.iD)("p",Le,"Error signing up. Please try again.")):(0,a.kq)("",!0),n.registerSuccess?((0,a.wg)(),(0,a.iD)("p",xe,"Successfully signed up! To complete the registration, activate your account via mail")):(0,a.kq)("",!0)])])}var Ae={name:"RegisterForm",data(){return{email:"",username:"",password:"",registerError:!1,registerSuccess:!1}},methods:{handleSubmit(){o.Z.post("/auth/signup/",{email:this.email,username:this.username,password:this.password}).then((()=>{this.registerSuccess=!0})).catch((e=>{console.log(e),this.registerError=!0}))},handleGoogleLogin(){window.location.href=o.Z.defaults.baseURL+"/auth/google_signin/"},checkAccessToken(){const e=this.$route.query.access_token;e&&(this.$store.commit(_),this.$store.commit(w,e),o.Z.defaults.headers.common.Authorization="Bearer "+e,this.$store.dispatch(L).then((()=>{alert("You have been successfully logged in :)"),this.$router.push("/")})).catch((e=>{alert("Error logging in. Please try again."),console.log(e)})))}},mounted(){this.checkAccessToken()}};const Ue=(0,R.Z)(Ae,[["render",qe]]);var Ee=Ue,Pe={name:"AuthView",components:{LoginForm:he,RegisterForm:Ee},data(){return{showRegisterForm:!1}},methods:{handleLoginSuccess(){alert("You have been successfully logged in :)"),this.$router.push("/")},handleRegisterSuccess(){alert("Successfully signed up!"),this.showRegisterForm=!1},toggleRegisterForm(){this.showRegisterForm=!this.showRegisterForm}}};const Ce=(0,R.Z)(Pe,[["render",W]]);var $e=Ce,Te={name:"MainView",components:{AuthView:$e},data(){return{databaseInfo:null}},computed:{isAuthenticated(){return this.$store.getters.isAuthenticated}},created(){this.isAuthenticated&&this.fetchDatabaseInfo()},methods:{fetchDatabaseInfo(){o.Z.get("/database-info/").then((e=>{this.databaseInfo=e.data})).catch((e=>{console.error("Error fetching database information:",e)}))},redirectToBrowse(e){this.$router.push({path:"/browse",query:{table:e}})}}};const Ze=(0,R.Z)(Te,[["render",B]]);var ze=Ze;const Ie={class:"resources"},je=(0,a._)("h1",null,"Resources",-1),Oe={key:0},Fe={key:1},Me={key:0,class:"mt-5 mb-5 bg-secondary"},Qe=(0,a._)("hr",{class:"hr hr-blurry"},null,-1),Ve=(0,a._)("h2",null,"Admin Resources",-1),Be=(0,a._)("h3",null,"Users data",-1),Ne={class:"table table-hover table-bordered table-dark"},He=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"#"),(0,a._)("th",{scope:"col"},"Name"),(0,a._)("th",{scope:"col"},"Email"),(0,a._)("th",{scope:"col"},"Is Active"),(0,a._)("th",{scope:"col"},"Hashed Password"),(0,a._)("th",{scope:"col"},"Roles"),(0,a._)("th",{scope:"col"},"Delete User"),(0,a._)("th",{scope:"col"},"Activate User")])],-1),Ye={scope:"row"},Ge=["onClick"],Ke=["disabled","onClick"],We={key:1,class:"mt-5 mb-5 bg-secondary"},Je=(0,a._)("hr",{class:"hr hr-blurry"},null,-1),Xe=(0,a._)("h2",null,"User Resources",-1),et=(0,a._)("h3",null,"About Roles...",-1),tt={class:"table table-hover table-bordered table-dark"},st=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"#"),(0,a._)("th",{scope:"col"},"Name"),(0,a._)("th",{scope:"col"},"Description")])],-1),rt={scope:"row"},ot=(0,a._)("hr",{class:"hr hr-blurry"},null,-1),at={key:2,class:"mt-5 mb-5 bg-secondary"};function nt(e,t,s,r,o,n){return(0,a.wg)(),(0,a.iD)("div",Ie,[je,o.loading?((0,a.wg)(),(0,a.iD)("div",Oe," Loading resources... ")):((0,a.wg)(),(0,a.iD)("div",Fe,[o.adminResources?((0,a.wg)(),(0,a.iD)("div",Me,[Qe,Ve,Be,(0,a._)("table",Ne,[He,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.adminResources,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("th",Ye,(0,l.zw)(e.id),1),(0,a._)("td",null,(0,l.zw)(e.name),1),(0,a._)("td",null,(0,l.zw)(e.email),1),(0,a._)("td",null,(0,l.zw)(e.is_active),1),(0,a._)("td",null,(0,l.zw)(e.hashed_password),1),(0,a._)("td",null,(0,l.zw)(this.getRoleNames(e.roles)),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-danger",onClick:t=>n.deleteUser(e.id)},"Delete",8,Ge)]),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-primary",disabled:e.is_active,onClick:t=>n.activateUser(e.id)}," Activate ",8,Ke)])])))),128))])])])):(0,a.kq)("",!0),o.userResources?((0,a.wg)(),(0,a.iD)("div",We,[Je,Xe,et,(0,a._)("table",tt,[st,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.userResources,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("th",rt,(0,l.zw)(e.id),1),(0,a._)("td",null,(0,l.zw)(e.name),1),(0,a._)("td",null,(0,l.zw)(e.description),1)])))),128))])])])):(0,a.kq)("",!0),ot,o.publicResources?((0,a.wg)(),(0,a.iD)("div",at,[(0,a._)("h2",null,"Public Resources: "+(0,l.zw)(o.publicResources),1)])):(0,a.kq)("",!0)]))])}function it(e){try{const t=e.map((e=>1===e.role_id?"Admin":2===e.role_id?"User":3===e.role_id?"Premium User":""));return t.join(", ")}catch(t){return console.error(t),""}}var lt={name:"ResourcesView",data(){return{userResources:null,adminResources:null,publicResources:null,loading:!1}},computed:{...(0,b.Se)(["getProfile","isAuthenticated","isProfileLoaded"]),...(0,b.rn)({roles:e=>`${it(e.user.profile.roles)}`})},watch:{isProfileLoaded(e){e&&this.loadResources()}},methods:{getRoleNames:it,async getResources(e,t){try{this.loading=!0;const s=await o.Z.get(e,{token:t});return s.data}catch(s){return console.error(s),null}finally{this.loading=!1}},async loadResources(){console.log("---------------------"),console.log(this.isProfileLoaded),console.log(this.roles),console.log("---------------------"),this.publicResources=await this.getResources("/resource/public/"),console.log(this.publicResources),this.isProfileLoaded&&this.roles.includes("Admin")&&(console.log("trace1"),this.adminResources=await this.getResources("/resource/admin/")),this.isProfileLoaded&&this.roles.includes("User")&&(console.log("trace2"),this.userResources=await this.getResources("/resource/user/"),console.log("here!"))},deleteUser(e){o.Z["delete"]("/user/",{data:{user_id:e}}).then((e=>{if(e)return alert("User deleted successfully"),this.getResources("/resource/admin/");alert("Error deleting user. Please try again.")})).then((e=>{this.adminResources=e})).catch((e=>{console.log(e),alert("Error deleting user. Please try again.")}))},activateUser(e){o.Z.put("/activate_user/",{user_id:e}).then((e=>{if(e)return alert("User activated successfully"),this.getResources("/resource/admin/");alert("Error activating user. Please try again.")})).then((e=>{this.adminResources=e})).catch((e=>{console.log(e),alert("Error activating user. Please try again.")}))}},async mounted(){this.loadResources()}};const ct=(0,R.Z)(lt,[["render",nt]]);var ut=ct;const dt={class:"user"},gt={class:"container-fluid"},ht=(0,a._)("h2",{class:"mt-5 mb-5"},"Profile",-1),mt={key:0},pt={class:"row"},ft={class:"col-md-10 mx-auto"},bt={class:"list-group"},_t={class:"list-group-item list-group-item-action list-group-item-light text-dark"},wt={class:"list-group-item list-group-item-action list-group-item-light text-dark"},vt={class:"list-group-item list-group-item-action list-group-item-light text-dark"},yt={class:"list-group-item list-group-item-action list-group-item-light text-dark"},kt={class:"list-group-item list-group-item-action list-group-item-light text-dark"},Rt={key:1},Dt=(0,a._)("p",null,"Loading user profile...",-1),St=[Dt];function Lt(e,t,s,r,o,n){return(0,a.wg)(),(0,a.iD)("div",dt,[(0,a._)("div",gt,[ht,e.isProfileLoaded?((0,a.wg)(),(0,a.iD)("div",mt,[(0,a._)("div",pt,[(0,a._)("div",ft,[(0,a._)("ul",bt,[(0,a._)("li",_t,"Name: "+(0,l.zw)(e.name),1),(0,a._)("li",wt,"Id: "+(0,l.zw)(e.id),1),(0,a._)("li",vt,"Email: "+(0,l.zw)(e.email),1),(0,a._)("li",yt,"Is Active: "+(0,l.zw)(e.is_active),1),(0,a._)("li",kt,"Token: "+(0,l.zw)(e.token),1)])])])])):((0,a.wg)(),(0,a.iD)("div",Rt,St))])])}var xt={name:"UserView",computed:{...(0,b.Se)(["getProfile","isProfileLoaded"]),...(0,b.rn)({authLoading:e=>"loading"===e.auth.status,name:e=>`${e.user.profile.username}`,email:e=>`${e.user.profile.email}`,id:e=>`${e.user.profile.id}`,is_active:e=>`${e.user.profile.is_active}`,roles:e=>`${it(e.user.profile.roles)}`,token:e=>`${e.auth.token}`})}};const qt=(0,R.Z)(xt,[["render",Lt]]);var At=qt;const Ut={class:"container"},Et={key:0,class:"row justify-content-center mt-5"},Pt={class:"col-md-8"},Ct={class:"text-center text-dark"},$t=["src"],Tt={class:"list-group"},Zt=(0,a._)("li",{class:"list-group-item list-group-item-action active"},"Table List",-1),zt=["onClick"],It={key:1,class:"text-dark"},jt=(0,a._)("p",null,"Loading database information...",-1),Ot=[jt],Ft={key:2,class:"row justify-content-center mt-5"},Mt={class:"col-md-12 text-dark"},Qt={class:"text-center text-secondary"},Vt={class:"table table-striped"},Bt=["onClick"],Nt={key:3,class:"row text-dark justify-content-center mt-5"},Ht={class:"col-md-8"},Yt=(0,a._)("h1",null,"Error",-1),Gt={class:"row justify-content-center mt-3"},Kt={class:"col-md-8"},Wt={class:"row justify-content-center mt-3"},Jt={class:"col-md-8"},Xt={class:"row justify-content-center mt-3"},es={class:"col-md-8"};function ts(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",Ut,[n.databaseInfo&&n.imageLoaded?((0,a.wg)(),(0,a.iD)("div",Et,[(0,a._)("div",Pt,[(0,a._)("h2",Ct,"Database Name: "+(0,l.zw)(n.databaseInfo.db_name),1),(0,a._)("img",{src:n.diagramUrl,alt:"Database Diagram",class:"img-fluid"},null,8,$t),(0,a._)("ul",Tt,[Zt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.databaseInfo.db_tables,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item list-group-item-action",key:e,onClick:t=>i.executeTableQuery(e)},(0,l.zw)(e),9,zt)))),128))])])])):((0,a.wg)(),(0,a.iD)("div",It,Ot)),n.queryResult?((0,a.wg)(),(0,a.iD)("div",Ft,[(0,a._)("div",Mt,[(0,a._)("h3",Qt,(0,l.zw)(n.sqlQuery),1),(0,a._)("table",Vt,[(0,a._)("thead",null,[(0,a._)("tr",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.queryResult[0],((e,t)=>((0,a.wg)(),(0,a.iD)("th",{scope:"col",key:t},[(0,a._)("button",{class:"btn",onClick:e=>i.sortTable(t)},(0,l.zw)(t),9,Bt)])))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.filteredQueryResult,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,((e,t)=>((0,a.wg)(),(0,a.iD)("td",{key:t},(0,l.zw)(e),1)))),128))])))),128))])])])])):(0,a.kq)("",!0),n.errorMessage?((0,a.wg)(),(0,a.iD)("div",Nt,[(0,a._)("div",Ht,[Yt,(0,a._)("p",null,(0,l.zw)(n.errorMessage),1)])])):(0,a.kq)("",!0),(0,a._)("div",Gt,[(0,a._)("div",Kt,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>n.filterCondition=e),placeholder:"Filter condition"},null,512),[[r.nr,n.filterCondition]])])]),(0,a._)("div",Wt,[(0,a._)("div",Jt,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>n.sqlQuery=e),placeholder:"SQL query"},null,512),[[r.nr,n.sqlQuery]])])]),(0,a._)("div",Xt,[(0,a._)("div",es,[(0,a._)("button",{onClick:t[2]||(t[2]=(...e)=>i.sendQuery&&i.sendQuery(...e)),class:"btn btn-primary"},"Send query")])])])}var ss={name:"BrowseView",data(){return{sqlQuery:"",queryResult:null,errorMessage:null,databaseInfo:null,filterCondition:"",sortColumn:"",sortAscending:!0,diagramUrl:"",imageLoaded:!1}},computed:{filteredQueryResult(){return this.queryResult?this.filterCondition?this.queryResult.filter((e=>{for(const t of Object.values(e))if(String(t).includes(this.filterCondition))return!0;return!1})):this.queryResult:[]}},created(){this.fetchDatabaseInfo(),this.executeQuery(),this.fetchDiagram()},methods:{sendQuery(){o.Z.post("/execute_sql/",null,{params:{sql_query:this.sqlQuery}}).then((e=>{Array.isArray(e.data)?(this.queryResult=e.data,this.errorMessage=null):(this.queryResult=null,this.errorMessage=e.data)})).catch((e=>{console.error("Error executing SQL query:",e),this.queryResult=null,this.errorMessage="An error occurred while executing the query."}))},executeQuery(){const e=this.$route.query.table;e&&o.Z.post("/execute_sql/",null,{params:{sql_query:`SELECT * FROM ${e}`}}).then((e=>{Array.isArray(e.data)&&(this.queryResult=e.data)})).catch((e=>{console.error("Error executing SQL query:",e)})).finally((()=>{this.$router.replace({query:{}})}))},executeTableQuery(e){const t=`SELECT * FROM ${e}`;this.sqlQuery=t,this.sendQuery()},fetchDatabaseInfo(){o.Z.get("/database-info/").then((e=>{this.databaseInfo=e.data})).catch((e=>{console.error("Error fetching database information:",e)}))},fetchDiagram(){o.Z.get("/database-diagram/",{responseType:"arraybuffer"}).then((e=>{const t=new Blob([e.data],{type:"image/png"});this.diagramUrl=URL.createObjectURL(t),this.imageLoaded=!0})).catch((e=>{console.error("Error fetching database diagram:",e)}))},sortTable(e){this.sortColumn===e?this.sortAscending=!this.sortAscending:(this.sortColumn=e,this.sortAscending=!0),this.queryResult.sort(((e,t)=>{const s=e[this.sortColumn],r=t[this.sortColumn];return s<r?this.sortAscending?-1:1:s>r?this.sortAscending?1:-1:0}))}}};const rs=(0,R.Z)(ss,[["render",ts]]);var os=rs;const as=[{path:"/db_browser_front/",name:"main",component:ze},{path:"/db_browser_front/auth",name:"auth",component:$e},{path:"/db_browser_front/resources",name:"resources",component:ut},{path:"/db_browser_front/profile",name:"user",component:At},{path:"/db_browser_front/browse",name:"browse",component:os}],ns=(0,P.p7)({history:(0,P.PO)("/db_browser_front/"),routes:as});var is=ns;const ls={status:"",profile:""},cs={getProfile:e=>e.profile,isProfileLoaded:e=>!!e.profile.username},us={[L]:({commit:e,dispatch:t})=>{e(L),o.Z.get("/user/").then((t=>{e(x,t)})).catch((s=>{console.log("user catch"),console.log(s),e(q),t(y)}))}},ds={[L]:e=>{e.status="loading"},[x]:(e,t)=>{e.status="success",e.profile=t.data},[q]:e=>{e.status="error"},[y]:e=>{e.profile={}}};var gs={state:ls,getters:cs,actions:us,mutations:ds};const hs={token:localStorage.getItem("user-token")||"",status:"",hasLoadedOnce:!1},ms={isAuthenticated:e=>!!e.token,authStatus:e=>e.status},ps={[_]:({commit:e,dispatch:t},s)=>new Promise(((r,a)=>{e(_),o.Z.post("/auth/signin/",s).then((s=>{localStorage.setItem("user-token",s.data.access_token),o.Z.defaults.headers.common.Authorization="Bearer "+s.data.access_token,e(w,s.data.access_token),t(L),r(s)})).catch((t=>{e(v,t),localStorage.removeItem("user-token"),a(t)}))})),[y]:({commit:e})=>new Promise((t=>{e(y),localStorage.removeItem("user-token"),t()}))},fs={[_]:e=>{e.status="loading"},[w]:(e,t)=>{e.status="success",e.token=t,e.hasLoadedOnce=!0},[v]:e=>{e.status="error",e.hasLoadedOnce=!0},[y]:e=>{e.token=""}};var bs={state:hs,getters:ms,actions:ps,mutations:fs},_s=(0,b.MT)({modules:{user:gs,auth:bs}});const ws=localStorage.getItem("user-token");ws&&(o.Z.defaults.headers.common.Authorization="Bearer "+ws);const vs=(0,r.ri)(E);o.Z.defaults.withCredentials=!1,o.Z.defaults.baseURL="https://db-browser-backend.onrender.com",o.Z.interceptors.request.use((function(e){return e.url=e.url.replace("http://","https://"),e})),vs.use(is),vs.use(_s),ws&&localStorage.setItem("user-token",ws),vs.mount("#app")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,a){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(t&&t(r);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},r=self["webpackChunkfrontend_app"]=self["webpackChunkfrontend_app"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(2315)}));r=s.O(r)})();
//# sourceMappingURL=app.e189a1f8.js.map