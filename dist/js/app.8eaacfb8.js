(function(){"use strict";var e={8047:function(e,t,s){s(3455);var o=s(9242),r=s(4161),n=s(3396);function a(e,t,s,o,r,a){const i=(0,n.up)("nav-bar"),l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(i),(0,n.Wm)(l)],64)}var i=s(7139);const l={class:"nav-bar"},c={class:"navbar navbar-expand-lg navbar-light bg-light border-bottom"},u={class:"container"},d=(0,n._)("a",{class:"navbar-brand px-2",href:"#"},"Authorization using JWT tokens",-1),m=(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1),g={class:"collapse navbar-collapse",id:"navbarNavAltMarkup"},p={class:"navbar-nav"};function h(e,t,s,o,r,a){const h=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("nav",c,[(0,n._)("div",u,[d,m,(0,n._)("div",g,[(0,n._)("div",p,[(0,n.Wm)(h,{class:"nav-item nav-link",to:"/",exact:""},{default:(0,n.w5)((()=>[(0,n.Uk)("Home")])),_:1}),e.isProfileLoaded?((0,n.wg)(),(0,n.j4)(h,{key:0,class:"nav-item nav-link",to:"/profile"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.name),1)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(h,{class:"nav-item nav-link",to:"/resources"},{default:(0,n.w5)((()=>[(0,n.Uk)("Resources")])),_:1}),e.isAuthenticated||e.authLoading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(h,{key:1,class:"nav-item nav-link",to:"/register"},{default:(0,n.w5)((()=>[(0,n.Uk)("Register")])),_:1})),e.isAuthenticated||e.authLoading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(h,{key:2,class:"nav-item nav-link",to:"/login"},{default:(0,n.w5)((()=>[(0,n.Uk)("Login")])),_:1})),e.isAuthenticated?((0,n.wg)(),(0,n.iD)("a",{key:3,onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e)),class:"nav-item nav-link",href:"#"},"Logout")):(0,n.kq)("",!0)])])])])])}s(7658);var f=s(65);const b="AUTH_REQUEST",v="AUTH_SUCCESS",_="AUTH_ERROR",w="AUTH_LOGOUT";var y={name:"NavBar",methods:{logout:function(){this.$store.dispatch(w).then((()=>this.$router.push("/")))}},computed:{...(0,f.Se)(["getProfile","isAuthenticated","isProfileLoaded"]),...(0,f.rn)({authLoading:e=>"loading"===e.auth.status,name:e=>`${e.user.profile.name}`})}},k=s(89);const R=(0,k.Z)(y,[["render",h]]);var L=R;const S="USER_REQUEST",U="USER_SUCCESS",P="USER_ERROR";var A={components:{NavBar:L},name:"MainView",created:function(){const e=this,t=new Promise((function(t,s){r.Z.interceptors.response.use(void 0,(function(t){401!==t.response.status||t.config.__isRetryRequest||"Token expired"!==t.response.data.detail||(e.$store.dispatch(w),console.log(t.response),alert("Access token expired. You will be automatically logged out.")),s(t)}))}));t.catch((function(){})),this.$store.getters.isAuthenticated&&this.$store.dispatch(S)}};const x=(0,k.Z)(A,[["render",a]]);var D=x,E=s(2483);const Z={class:"main"},$={key:0},z={key:1};function q(e,t,s,o,r,a){const i=(0,n.up)("Navbar"),l=(0,n.up)("AuthView");return(0,n.wg)(),(0,n.iD)("div",Z,[(0,n.Wm)(i),a.isAuthenticated?((0,n.wg)(),(0,n.iD)("div",z)):((0,n.wg)(),(0,n.iD)("div",$,[(0,n.Wm)(l)]))])}const j={class:"container-fluid"},F={class:"row justify-content-center align-items-center",style:{height:"100vh"}},O={class:"text-center text-dark mt-3"},V={key:0},T={key:1};function C(e,t,s,r,a,i){const l=(0,n.up)("LoginForm"),c=(0,n.up)("RegisterForm");return(0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("div",F,[(0,n.Wm)(o.uT,{name:"fade",duration:{enter:1e3,leave:1e3},mode:"out-in"},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)("div",{class:"col-md-4 col-sm-8 col-10 border p-4 bg-light",key:a.showRegisterForm},[(0,n.Wm)(o.uT,{name:"fade"},{default:(0,n.w5)((()=>[a.showRegisterForm?((0,n.wg)(),(0,n.j4)(c,{key:1,onRegisterSuccess:i.handleRegisterSuccess},null,8,["onRegisterSuccess"])):((0,n.wg)(),(0,n.j4)(l,{key:0,onLoginSuccess:i.handleLoginSuccess},null,8,["onLoginSuccess"]))])),_:1}),(0,n._)("div",O,[a.showRegisterForm?((0,n.wg)(),(0,n.iD)("p",T,[(0,n.Uk)(" Already have an account? "),(0,n._)("a",{href:"#",onClick:t[1]||(t[1]=(0,o.iM)(((...e)=>i.toggleRegisterForm&&i.toggleRegisterForm(...e)),["prevent"]))},"Login")])):((0,n.wg)(),(0,n.iD)("p",V,[(0,n.Uk)(" Don't have an account? "),(0,n._)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.iM)(((...e)=>i.toggleRegisterForm&&i.toggleRegisterForm(...e)),["prevent"]))},"Register")]))])]))])),_:1})])])}const M={class:"mb-3"},G=(0,n._)("label",{for:"inputLogin",class:"form-label"},"Login",-1),H={class:"mb-3"},N=(0,n._)("label",{for:"inputPassword",class:"form-label"},"Password",-1),I=(0,n._)("div",{class:"d-flex justify-content-center"},[(0,n._)("button",{type:"submit",class:"btn btn-primary border w-100"},"Submit")],-1),W={class:"text-center text-dark mt-3"},Y=(0,n._)("p",null,"or log in with:",-1),B=(0,n._)("i",{class:"fab fa-google"},null,-1);function K(e,t,s,r,a,i){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("form",{class:"text-dark",onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.handleLogin&&i.handleLogin(...e)),["prevent"]))},[(0,n._)("div",M,[G,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e)},null,512),[[o.nr,a.username]])]),(0,n._)("div",H,[N,(0,n.wy)((0,n._)("input",{type:"password",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[o.nr,a.password]])]),I],32),(0,n._)("div",W,[Y,(0,n._)("button",{type:"button",class:"btn btn-floating btn-secondary mx-1 w-100",onClick:t[3]||(t[3]=(...t)=>e.handleGoogleRegister&&e.handleGoogleRegister(...t))},[B,(0,n.Uk)(" Google ")])])],64)}var Q={data(){return{username:"",password:""}},methods:{handleLogin(){}}};const J=(0,k.Z)(Q,[["render",K]]);var X=J;const ee={class:"mb-3"},te=(0,n._)("label",{for:"inputEmail",class:"form-label"},"E-mail",-1),se={class:"mb-3"},oe=(0,n._)("label",{for:"inputLogin",class:"form-label"},"Login",-1),re={class:"mb-3"},ne=(0,n._)("label",{for:"inputPassword",class:"form-label"},"Password",-1),ae=(0,n._)("div",{class:"d-flex justify-content-center"},[(0,n._)("button",{type:"submit",class:"btn btn-primary border w-100"},"Submit")],-1),ie={class:"text-center text-dark mt-3"},le=(0,n._)("p",null,"or log in with:",-1),ce=(0,n._)("i",{class:"fab fa-google"},null,-1);function ue(e,t,s,r,a,i){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("form",{class:"text-dark",onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,n._)("div",ee,[te,(0,n.wy)((0,n._)("input",{type:"email",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[o.nr,a.email]])]),(0,n._)("div",se,[oe,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>a.username=e)},null,512),[[o.nr,a.username]])]),(0,n._)("div",re,[ne,(0,n.wy)((0,n._)("input",{type:"password",class:"form-control",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>a.password=e)},null,512),[[o.nr,a.password]])]),ae],32),(0,n._)("div",ie,[le,(0,n._)("button",{type:"button",class:"btn btn-floating btn-secondary mx-1 w-100",onClick:t[4]||(t[4]=(...t)=>e.handleGoogleRegister&&e.handleGoogleRegister(...t))},[ce,(0,n.Uk)(" Google ")])])],64)}var de={name:"RegisterForm",data(){return{email:"",username:"",password:""}},methods:{handleSubmit(){r.Z.post("/auth/signup/",{email:this.email,name:this.username,password:this.password}).then((e=>{200===e.status?(alert("Successfully signed up!"),this.$emit("register-success")):alert("Error signing up. Please try again.")})).catch((e=>{e.response&&200!==e.response.status&&alert("Error signing up. Please try again.")}))}}};const me=(0,k.Z)(de,[["render",ue]]);var ge=me,pe={name:"AuthView",components:{LoginForm:X,RegisterForm:ge},data(){return{showRegisterForm:!1}},methods:{handleLoginSuccess(){alert("You have been successfully logged in :)"),this.$router.push("/")},handleRegisterSuccess(){alert("Successfully signed up!"),this.showRegisterForm=!1},toggleRegisterForm(){this.showRegisterForm=!this.showRegisterForm}}};const he=(0,k.Z)(pe,[["render",C]]);var fe=he,be={name:"MainView",components:{AuthView:fe},computed:{isAuthenticated(){return this.$store.getters.isAuthenticated}}};const ve=(0,k.Z)(be,[["render",q]]);var _e=ve;const we={class:"login"},ye={class:"container-fluid bg-dark"},ke={class:"row justify-content-center align-items-center",style:{height:"100vh"}},Re={class:"col-md-4 col-sm-12 border p-4"},Le={class:"mb-3"},Se=(0,n._)("label",{for:"inputLogin",class:"form-label"},"Login",-1),Ue={class:"mb-3"},Pe=(0,n._)("label",{for:"inputPassword",class:"form-label"},"Password",-1),Ae=(0,n._)("div",{class:"d-flex justify-content-center"},[(0,n._)("button",{type:"submit",class:"btn btn-dark border"},"Submit")],-1),xe=(0,n._)("hr",null,null,-1),De={class:"text-center"},Ee=(0,n._)("input",{type:"submit",class:"btn btn-light",value:"Continue with Google"},null,-1),Ze=[Ee];function $e(e,t,s,r,a,i){return(0,n.wg)(),(0,n.iD)("div",we,[(0,n._)("div",ye,[(0,n._)("div",ke,[(0,n._)("div",Re,[(0,n._)("form",{class:"text-light",onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.handleLogin&&i.handleLogin(...e)),["prevent"]))},[(0,n._)("div",Le,[Se,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.username=e)},null,512),[[o.nr,a.form.username]])]),(0,n._)("div",Ue,[Pe,(0,n.wy)((0,n._)("input",{type:"password",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.password=e)},null,512),[[o.nr,a.form.password]])]),Ae],32),xe,(0,n._)("div",De,[(0,n._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>i.handleGoogleLogin&&i.handleGoogleLogin(...e)),["prevent"]))},Ze,32)])])])])])}var ze={name:"LoginView",data(){return{form:{username:"",password:""}}},methods:{handleLogin(){const{username:e,password:t}=this.form,s=new FormData;s.append("username",e),s.append("password",t),this.$store.dispatch(b,s).then((()=>{alert("You have been successfully logged in :)"),this.$router.push("/")})).catch((e=>{alert("Error logging in. Please try again."),console.log(e)}))},handleGoogleLogin(){window.location.href="https://fastapi-server-ezey.onrender.com/auth/google_signin/"},checkAccessToken(){const e=this.$route.query.access_token;e&&(this.$store.commit(b),this.$store.commit(v,e),r.Z.defaults.headers.common.Authorization="Bearer "+e,this.$store.dispatch(S).then((()=>{alert("You have been successfully logged in :)"),this.$router.push("/")})).catch((e=>{alert("Error logging in. Please try again."),console.log(e)})))}},mounted(){this.checkAccessToken()}};const qe=(0,k.Z)(ze,[["render",$e]]);var je=qe;const Fe={class:"register"},Oe={class:"container-fluid bg-dark"},Ve={class:"row justify-content-center align-items-center",style:{height:"100vh"}},Te={class:"col-md-4 col-sm-12 border p-4"},Ce={class:"mb-3"},Me=(0,n._)("label",{for:"inputEmail",class:"form-label"},"E-mail",-1),Ge={class:"mb-3"},He=(0,n._)("label",{for:"inputLogin",class:"form-label"},"Login",-1),Ne={class:"mb-3"},Ie=(0,n._)("label",{for:"inputPassword",class:"form-label"},"Password",-1),We=(0,n._)("div",{class:"d-flex justify-content-center"},[(0,n._)("button",{type:"submit",class:"btn btn-dark border"},"Submit")],-1);function Ye(e,t,s,r,a,i){return(0,n.wg)(),(0,n.iD)("div",Fe,[(0,n._)("div",Oe,[(0,n._)("div",Ve,[(0,n._)("div",Te,[(0,n._)("form",{class:"text-light",onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[(0,n._)("div",Ce,[Me,(0,n.wy)((0,n._)("input",{type:"email",class:"form-control",input:"",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[o.nr,a.email]])]),(0,n._)("div",Ge,[He,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",input:"",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>a.name=e)},null,512),[[o.nr,a.name]])]),(0,n._)("div",Ne,[Ie,(0,n.wy)((0,n._)("input",{type:"password",class:"form-control",input:"",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>a.password=e)},null,512),[[o.nr,a.password]])]),We],32)])])])])}var Be={name:"LoginView",data(){return{name:"",email:"",password:""}},methods:{handleSubmit(){r.Z.post("/auth/signup/",{name:this.name,email:this.email,password:this.password}).then((e=>{e?(alert("Successfully sign up!"),this.$router.push("/")):alert("Error signing up. Please try again.")})).catch((e=>{200!==e.response.status&&alert("Error signing up. Please try again.")}))}}};const Ke=(0,k.Z)(Be,[["render",Ye]]);var Qe=Ke;const Je={class:"resources"},Xe=(0,n._)("h1",null,"Resources",-1),et={key:0},tt={key:1},st={key:0,class:"mt-5 mb-5 bg-secondary"},ot=(0,n._)("hr",{class:"hr hr-blurry"},null,-1),rt=(0,n._)("h2",null,"Admin Resources",-1),nt=(0,n._)("h3",null,"Users data",-1),at={class:"table table-hover table-bordered table-dark"},it=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"#"),(0,n._)("th",{scope:"col"},"Name"),(0,n._)("th",{scope:"col"},"Email"),(0,n._)("th",{scope:"col"},"Is Active"),(0,n._)("th",{scope:"col"},"Hashed Password"),(0,n._)("th",{scope:"col"},"Roles"),(0,n._)("th",{scope:"col"},"Delete User"),(0,n._)("th",{scope:"col"},"Activate User")])],-1),lt={scope:"row"},ct=["onClick"],ut=["disabled","onClick"],dt={key:1,class:"mt-5 mb-5 bg-secondary"},mt=(0,n._)("hr",{class:"hr hr-blurry"},null,-1),gt=(0,n._)("h2",null,"User Resources",-1),pt=(0,n._)("h3",null,"About Roles...",-1),ht={class:"table table-hover table-bordered table-dark"},ft=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{scope:"col"},"#"),(0,n._)("th",{scope:"col"},"Name"),(0,n._)("th",{scope:"col"},"Description")])],-1),bt={scope:"row"},vt=(0,n._)("hr",{class:"hr hr-blurry"},null,-1),_t={key:2,class:"mt-5 mb-5 bg-secondary"};function wt(e,t,s,o,r,a){return(0,n.wg)(),(0,n.iD)("div",Je,[Xe,r.loading?((0,n.wg)(),(0,n.iD)("div",et," Loading resources... ")):((0,n.wg)(),(0,n.iD)("div",tt,[r.adminResources?((0,n.wg)(),(0,n.iD)("div",st,[ot,rt,nt,(0,n._)("table",at,[it,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.adminResources,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("th",lt,(0,i.zw)(e.id),1),(0,n._)("td",null,(0,i.zw)(e.name),1),(0,n._)("td",null,(0,i.zw)(e.email),1),(0,n._)("td",null,(0,i.zw)(e.is_active),1),(0,n._)("td",null,(0,i.zw)(e.hashed_password),1),(0,n._)("td",null,(0,i.zw)(this.getRoleNames(e.roles)),1),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-danger",onClick:t=>a.deleteUser(e.id)},"Delete",8,ct)]),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-primary",disabled:e.is_active,onClick:t=>a.activateUser(e.id)}," Activate ",8,ut)])])))),128))])])])):(0,n.kq)("",!0),r.userResources?((0,n.wg)(),(0,n.iD)("div",dt,[mt,gt,pt,(0,n._)("table",ht,[ft,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.userResources,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("th",bt,(0,i.zw)(e.id),1),(0,n._)("td",null,(0,i.zw)(e.name),1),(0,n._)("td",null,(0,i.zw)(e.description),1)])))),128))])])])):(0,n.kq)("",!0),vt,r.publicResources?((0,n.wg)(),(0,n.iD)("div",_t,[(0,n._)("h2",null,"Public Resources: "+(0,i.zw)(r.publicResources),1)])):(0,n.kq)("",!0)]))])}function yt(e){try{const t=e.map((e=>1===e.role_id?"Admin":2===e.role_id?"User":3===e.role_id?"Premium User":""));return t.join(", ")}catch(t){return console.error(t),""}}var kt={name:"ResourcesView",data(){return{userResources:null,adminResources:null,publicResources:null,loading:!1}},computed:{...(0,f.Se)(["getProfile","isAuthenticated","isProfileLoaded"]),...(0,f.rn)({roles:e=>`${yt(e.user.profile.roles)}`})},watch:{isProfileLoaded(e){e&&this.loadResources()}},methods:{getRoleNames:yt,async getResources(e,t){try{this.loading=!0;const s=await r.Z.get(e,{token:t});return s.data}catch(s){return console.error(s),null}finally{this.loading=!1}},async loadResources(){console.log("---------------------"),console.log(this.isProfileLoaded),console.log(this.roles),console.log("---------------------"),this.publicResources=await this.getResources("/resource/public/"),console.log(this.publicResources),this.isProfileLoaded&&this.roles.includes("Admin")&&(console.log("trace1"),this.adminResources=await this.getResources("/resource/admin/")),this.isProfileLoaded&&this.roles.includes("User")&&(console.log("trace2"),this.userResources=await this.getResources("/resource/user/"),console.log("here!"))},deleteUser(e){r.Z["delete"]("/user/",{data:{user_id:e}}).then((e=>{if(e)return alert("User deleted successfully"),this.getResources("/resource/admin/");alert("Error deleting user. Please try again.")})).then((e=>{this.adminResources=e})).catch((e=>{console.log(e),alert("Error deleting user. Please try again.")}))},activateUser(e){r.Z.put("/activate_user/",{user_id:e}).then((e=>{if(e)return alert("User activated successfully"),this.getResources("/resource/admin/");alert("Error activating user. Please try again.")})).then((e=>{this.adminResources=e})).catch((e=>{console.log(e),alert("Error activating user. Please try again.")}))}},async mounted(){this.loadResources()}};const Rt=(0,k.Z)(kt,[["render",wt]]);var Lt=Rt;const St={class:"user"},Ut={class:"container-fluid"},Pt=(0,n._)("h2",{class:"mt-5 mb-5"},"Profile",-1),At={key:0},xt={class:"row"},Dt={class:"col-md-10 mx-auto"},Et={class:"list-group"},Zt={class:"list-group-item list-group-item-action list-group-item-dark"},$t={class:"list-group-item list-group-item-action list-group-item-dark"},zt={class:"list-group-item list-group-item-action list-group-item-dark"},qt={class:"list-group-item list-group-item-action list-group-item-dark"},jt={class:"list-group-item list-group-item-action list-group-item-dark"},Ft={class:"list-group-item list-group-item-action list-group-item-dark"},Ot={key:1},Vt=(0,n._)("p",null,"Loading user profile...",-1),Tt=[Vt];function Ct(e,t,s,o,r,a){return(0,n.wg)(),(0,n.iD)("div",St,[(0,n._)("div",Ut,[Pt,e.isProfileLoaded?((0,n.wg)(),(0,n.iD)("div",At,[(0,n._)("div",xt,[(0,n._)("div",Dt,[(0,n._)("ul",Et,[(0,n._)("li",Zt,"Name: "+(0,i.zw)(e.name),1),(0,n._)("li",$t,"Id: "+(0,i.zw)(e.id),1),(0,n._)("li",zt,"Email: "+(0,i.zw)(e.email),1),(0,n._)("li",qt,"Is Active: "+(0,i.zw)(e.is_active),1),(0,n._)("li",jt,"Roles: "+(0,i.zw)(e.roles),1),(0,n._)("li",Ft,"Token: "+(0,i.zw)(e.token),1)])])])])):((0,n.wg)(),(0,n.iD)("div",Ot,Tt))])])}var Mt={name:"UserView",computed:{...(0,f.Se)(["getProfile","isProfileLoaded"]),...(0,f.rn)({authLoading:e=>"loading"===e.auth.status,name:e=>`${e.user.profile.name}`,email:e=>`${e.user.profile.email}`,id:e=>`${e.user.profile.id}`,is_active:e=>`${e.user.profile.is_active}`,roles:e=>`${yt(e.user.profile.roles)}`,token:e=>`${e.auth.token}`})}};const Gt=(0,k.Z)(Mt,[["render",Ct]]);var Ht=Gt;const Nt=[{path:"/",name:"main",component:_e},{path:"/login",name:"login",component:je},{path:"/register",name:"register",component:Qe},{path:"/resources",name:"resources",component:Lt},{path:"/profile",name:"user",component:Ht}],It=(0,E.p7)({history:(0,E.PO)("/db_browser_front/"),routes:Nt});var Wt=It;const Yt={status:"",profile:""},Bt={getProfile:e=>e.profile,isProfileLoaded:e=>!!e.profile.name},Kt={[S]:({commit:e,dispatch:t})=>{e(S),r.Z.get("/user/").then((t=>{e(U,t)})).catch((s=>{console.log("user catch"),console.log(s),e(P),t(w)}))}},Qt={[S]:e=>{e.status="loading"},[U]:(e,t)=>{e.status="success",e.profile=t.data},[P]:e=>{e.status="error"},[w]:e=>{e.profile={}}};var Jt={state:Yt,getters:Bt,actions:Kt,mutations:Qt};const Xt={token:localStorage.getItem("user-token")||"",status:"",hasLoadedOnce:!1},es={isAuthenticated:e=>!!e.token,authStatus:e=>e.status},ts={[b]:({commit:e,dispatch:t},s)=>new Promise(((o,n)=>{e(b),r.Z.post("/auth/signin/",s).then((s=>{localStorage.setItem("user-token",s.data.access_token),r.Z.defaults.headers.common.Authorization="Bearer "+s.data.access_token,e(v,s.data.access_token),t(S),o(s)})).catch((t=>{e(_,t),localStorage.removeItem("user-token"),n(t)}))})),[w]:({commit:e})=>new Promise((t=>{e(w),localStorage.removeItem("user-token"),t()}))},ss={[b]:e=>{e.status="loading"},[v]:(e,t)=>{e.status="success",e.token=t,e.hasLoadedOnce=!0},[_]:e=>{e.status="error",e.hasLoadedOnce=!0},[w]:e=>{e.token=""}};var os={state:Xt,getters:es,actions:ts,mutations:ss},rs=(0,f.MT)({modules:{user:Jt,auth:os}});const ns=localStorage.getItem("user-token");ns&&(r.Z.defaults.headers.common.Authorization="Bearer "+ns);const as=(0,o.ri)(D);r.Z.defaults.withCredentials=!1,r.Z.defaults.baseURL="https://db-browser-backend.onrender.com",r.Z.interceptors.request.use((function(e){return e.url=e.url.replace("http://","https://"),e})),as.use(Wt),as.use(rs),ns&&localStorage.setItem("user-token",ns),as.mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,n){if(!o){var a=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],n=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(i=!1,n<a&&(a=n));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,a=o[0],i=o[1],l=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var u=l(s)}for(t&&t(o);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},o=self["webpackChunkfrontend_app"]=self["webpackChunkfrontend_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(8047)}));o=s.O(o)})();
//# sourceMappingURL=app.8eaacfb8.js.map